<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CAL</title>
    <link rel="stylesheet" href="assests/Bootstrap/css/bootstrap.css">
    <style>
        body{
            background: url("assests/background.jpg");
            background-size: cover;
            background-position: center;
        }
        #container_section{
            position: relative;
            bottom: 50%;
        }

        section>div>button:hover {
            opacity: 50%;
        }
        #btnC:hover{
            background-color: #ff8f8f !important;
        }
        #btnEqual:hover{
            background-color: lightgreen !important;
        }
    </style>
</head>

<body class="d-flex" style="height: 100vh">
<section class="container text-center rounded-2 bg-dark bg-opacity-75 shadow-lg" id="container_section" style="width:45%;  height:55%;   position: absolute; top: 0; bottom: 0; left: 0; right: 0; margin: auto;">
    <section class="row m-auto mt-4 mb-4 mx-4 " style="height: 60px">
        <div class="col-3 h-100" >
            <button id="btnC" class="btn  w-100 h-100 bg-warning-subtle bg-opacity-75" style="background-color: #ffa7a7;">C</button>
        </div>
        <div class="col h-100">
            <input id="inpDis" type="text" class="form-control w-100 h-100 rounded-2 bg-white bg-opacity-10 border-black border-2 border-opacity-100 text-white" style="text-align: right" disabled >
        </div>
    </section>
    <section class="row m-auto  mt-4 mb-1 mx-4 py-1" style="height: 60px">
        <div class="col-3 h-100" >
            <button id="btn7" class="btn w-100 h-100 bg-white bg-opacity-75" style="">7</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btn8" class="btn w-100 h-100 bg-white bg-opacity-75" style="">8</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btn9" class="btn w-100 h-100 bg-white bg-opacity-75" style="">9</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btnPlus" class="btn w-100 h-100 bg-warning-subtle" style="">+</button>
        </div>
    </section>
    <section class="row m-auto  mt-1 mb-1 mx-4 py-1" style="height: 60px">
        <div class="col-3 h-100" >
            <button id="btn4" class="btn w-100 h-100 bg-white bg-opacity-75" style="">4</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btn5" class="btn w-100 h-100 bg-white bg-opacity-75" style="">5</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btn6" class="btn w-100 h-100 bg-white bg-opacity-75" style="">6</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btnMinus" class="btn w-100 h-100 bg-warning-subtle" style="">-</button>
        </div>
    </section>
    <section class="row m-auto mt-1 mb-1 mx-4 py-1" style="height: 60px">
        <div class="col-3 h-100" >
            <button id="btn1" class="btn w-100 h-100 bg-white bg-opacity-75" style="">1</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btn2" class="btn w-100 h-100 bg-white bg-opacity-75" style="">2</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btn3" class="btn w-100 h-100 bg-white bg-opacity-75" style="">3</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btnDivide" class="btn w-100 h-100 bg-warning-subtle" style="">/</button>
        </div>
    </section>
    <section class="row m-auto mt-1 mb-4 mx-4 py-1" style="height: 60px">
        <div class="col-3 h-100" >
            <button id="btn0" class="btn w-100 h-100 bg-white bg-opacity-75" style="">0</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btnDot" class="btn w-100 h-100 bg-white bg-opacity-75" style="">.</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btnEqual" class="btn w-100 h-100" style="background-color: #75ffd3; opacity: 70%;">=</button>
        </div>
        <div class="col-3 h-100" >
            <button id="btnMultiplication" class="btn w-100 h-100 bg-warning-subtle" style="">*</button>
        </div>
    </section>
</section>

<script>
    let btnC = document.getElementById("btnC");
    let btn1 = document.getElementById("btn1");
    let btn2 = document.getElementById("btn2");
    let btn3 = document.getElementById("btn3");
    let btn4 = document.getElementById("btn4");
    let btn5 = document.getElementById("btn5");
    let btn6 = document.getElementById("btn6");
    let btn7 = document.getElementById("btn7");
    let btn8 = document.getElementById("btn8");
    let btn9 = document.getElementById("btn9");
    let btn0 = document.getElementById("btn0");
    let btnDot = document.getElementById("btnDot");
    let btnEqual = document.getElementById("btnEqual");
    let btnPlus = document.getElementById("btnPlus");
    let btnMinus = document.getElementById("btnMinus");
    let btnDivide = document.getElementById("btnDivide");
    let btnMultiplication = document.getElementById("btnMultiplication");
    let display = document.getElementById("inpDis");

    var number = 0;
    let operator;

    btnPlus.addEventListener("click",function(){
        operator="plus";
        if (typeof midNum == 'undefined') {
            number = display.value;
        }else{
            number = midNum;
        }
        display.value=""
    });
    btnMinus.addEventListener("click",function(){
        operator="minus";
        if (typeof midNum == 'undefined') {
            number = display.value;
        }else{
            number = midNum;
        }
        display.value=""
    });
    btnDivide.addEventListener("click",function(){
        operator="divide";
        if (typeof midNum == 'undefined') {
            number = display.value;
        }else{
            number = midNum;
        }
        display.value=""
    });
    btnMultiplication.addEventListener("click",function(){
        operator="multiply";
        if (typeof midNum == 'undefined') {
            number = display.value;
        }else{
            number = midNum;
        }
        display.value=""
    });

    var midNum;
    function midCalculations(midNumber){
        switch(operator){
            case "plus":
                midNum = parseFloat(number) + parseFloat(midNumber);
                break;
            case "minus":
                midNum = parseFloat(number) - parseFloat(midNumber);
                break;
            case "divide":
                midNum = parseFloat(number) / parseFloat(midNumber);
                break;
            case "multiply":
                midNum = parseFloat(number) * parseFloat(midNumber);
                break;
            default:
                break;
        }
    }
    function selectOperator(num){
        switch(operator){
            case "plus":
                number = parseFloat(number) + parseFloat(num);
                break;
            case "minus":
                number = parseFloat(number) - parseFloat(num);
                break;
            case "divide":
                number = parseFloat(number) / parseFloat(num);
                break;
            case "multiply":
                number = parseFloat(number) * parseFloat(num);
                break;
        }
        console.log(number);
    }
    function displayOnScreen(num){
        if(display.value==0 && display.value!="0."){
            display.value = num;
        }else{
            display.value = display.value+num;
        }
    }

    btnC.addEventListener("click",function(){
        display.value="";
        number=0;
        midNum= undefined;
        operator= undefined;
    });
    btnDot.addEventListener("click",function(){
        let dotCount = display.value.match(/\./g);
        if (dotCount && dotCount.length >= 1) {

        }else{
            if(display.value==""){
                display.value = "0.";
            }else{
                display.value = display.value+".";
            }
        }
    });
    btn0.addEventListener("click",function(){
        displayOnScreen(0);
        midCalculations(display.value);
    });
    btn1.addEventListener("click",function(){
        displayOnScreen(1);
        midCalculations(display.value);
    });
    btn2.addEventListener("click",function(){
        displayOnScreen(2);
        midCalculations(display.value);
    });
    btn3.addEventListener("click",function(){
        displayOnScreen(3);
        midCalculations(display.value);
    });
    btn4.addEventListener("click",function(){
        displayOnScreen(4);
        midCalculations(display.value);
    });
    btn5.addEventListener("click",function(){
        displayOnScreen(5);
        midCalculations(display.value);
    });
    btn6.addEventListener("click",function(){
        displayOnScreen(6);
        midCalculations(display.value);
    });
    btn7.addEventListener("click",function(){
        displayOnScreen(7);
        midCalculations(display.value);
    });
    btn8.addEventListener("click",function(){
        displayOnScreen(8);
        midCalculations(display.value);
    });
    btn9.addEventListener("click",function(){
        displayOnScreen(9);
        midCalculations(display.value);
    });
    btnEqual.addEventListener("click",function(){
        if(display.value==""){
            selectOperator(0);
        }else{
            selectOperator(display.value);
        }

        if(isNaN(number)){
            display.value="Invalid"
            number=0;
        }else{
            console.log("else");
            if (typeof midNum == 'undefined') {
                console.log("else if");
            }else{
                console.log("else else");
                display.value = number;
            }
        }
        operator= undefined;
        midNum= undefined;
    });
</script>
</body>
</html>